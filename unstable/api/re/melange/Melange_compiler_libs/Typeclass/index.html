<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Typeclass (melange.Melange_compiler_libs.Typeclass)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="canonical" href="https://melange.re/v5.0.0/api/re/melange/Melange_compiler_libs/Typeclass/index.html" /></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">melange</a> &#x00BB; <a href="../index.html">Melange_compiler_libs</a> &#x00BB; Typeclass</nav><header class="odoc-preamble"><h1>Module <code><span>Melange_compiler_libs.Typeclass</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-class_info"><a href="#type-class_info" class="anchor"></a><code><span><span class="keyword">type</span> class_info('a)</span><span> = </span><span>{</span></code><ol><li id="type-class_info.cls_id" class="def record field anchored"><a href="#type-class_info.cls_id" class="anchor"></a><code><span>cls_id: <span class="xref-unresolved">Ident</span>.t,</span></code></li><li id="type-class_info.cls_id_loc" class="def record field anchored"><a href="#type-class_info.cls_id_loc" class="anchor"></a><code><span>cls_id_loc: <span class="xref-unresolved">Asttypes</span>.loc(string),</span></code></li><li id="type-class_info.cls_decl" class="def record field anchored"><a href="#type-class_info.cls_decl" class="anchor"></a><code><span>cls_decl: <a href="../Types/index.html#type-class_declaration">Types.class_declaration</a>,</span></code></li><li id="type-class_info.cls_ty_id" class="def record field anchored"><a href="#type-class_info.cls_ty_id" class="anchor"></a><code><span>cls_ty_id: <span class="xref-unresolved">Ident</span>.t,</span></code></li><li id="type-class_info.cls_ty_decl" class="def record field anchored"><a href="#type-class_info.cls_ty_decl" class="anchor"></a><code><span>cls_ty_decl: <a href="../Types/index.html#type-class_type_declaration">Types.class_type_declaration</a>,</span></code></li><li id="type-class_info.cls_obj_id" class="def record field anchored"><a href="#type-class_info.cls_obj_id" class="anchor"></a><code><span>cls_obj_id: <span class="xref-unresolved">Ident</span>.t,</span></code></li><li id="type-class_info.cls_obj_abbr" class="def record field anchored"><a href="#type-class_info.cls_obj_abbr" class="anchor"></a><code><span>cls_obj_abbr: <a href="../Types/index.html#type-type_declaration">Types.type_declaration</a>,</span></code></li><li id="type-class_info.cls_abbr" class="def record field anchored"><a href="#type-class_info.cls_abbr" class="anchor"></a><code><span>cls_abbr: <a href="../Types/index.html#type-type_declaration">Types.type_declaration</a>,</span></code></li><li id="type-class_info.cls_arity" class="def record field anchored"><a href="#type-class_info.cls_arity" class="anchor"></a><code><span>cls_arity: int,</span></code></li><li id="type-class_info.cls_pub_methods" class="def record field anchored"><a href="#type-class_info.cls_pub_methods" class="anchor"></a><code><span>cls_pub_methods: list(string),</span></code></li><li id="type-class_info.cls_info" class="def record field anchored"><a href="#type-class_info.cls_info" class="anchor"></a><code><span>cls_info: <span class="type-var">'a</span>,</span></code></li></ol><code><span>}</span><span>;</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-class_type_info"><a href="#type-class_type_info" class="anchor"></a><code><span><span class="keyword">type</span> class_type_info</span><span> = </span><span>{</span></code><ol><li id="type-class_type_info.clsty_ty_id" class="def record field anchored"><a href="#type-class_type_info.clsty_ty_id" class="anchor"></a><code><span>clsty_ty_id: <span class="xref-unresolved">Ident</span>.t,</span></code></li><li id="type-class_type_info.clsty_id_loc" class="def record field anchored"><a href="#type-class_type_info.clsty_id_loc" class="anchor"></a><code><span>clsty_id_loc: <span class="xref-unresolved">Asttypes</span>.loc(string),</span></code></li><li id="type-class_type_info.clsty_ty_decl" class="def record field anchored"><a href="#type-class_type_info.clsty_ty_decl" class="anchor"></a><code><span>clsty_ty_decl: <a href="../Types/index.html#type-class_type_declaration">Types.class_type_declaration</a>,</span></code></li><li id="type-class_type_info.clsty_obj_id" class="def record field anchored"><a href="#type-class_type_info.clsty_obj_id" class="anchor"></a><code><span>clsty_obj_id: <span class="xref-unresolved">Ident</span>.t,</span></code></li><li id="type-class_type_info.clsty_obj_abbr" class="def record field anchored"><a href="#type-class_type_info.clsty_obj_abbr" class="anchor"></a><code><span>clsty_obj_abbr: <a href="../Types/index.html#type-type_declaration">Types.type_declaration</a>,</span></code></li><li id="type-class_type_info.clsty_abbr" class="def record field anchored"><a href="#type-class_type_info.clsty_abbr" class="anchor"></a><code><span>clsty_abbr: <a href="../Types/index.html#type-type_declaration">Types.type_declaration</a>,</span></code></li><li id="type-class_type_info.clsty_info" class="def record field anchored"><a href="#type-class_type_info.clsty_info" class="anchor"></a><code><span>clsty_info: <a href="../Typedtree/index.html#type-class_type_declaration">Typedtree.class_type_declaration</a>,</span></code></li></ol><code><span>}</span><span>;</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-class_declarations"><a href="#val-class_declarations" class="anchor"></a><code><span><span class="keyword">let</span> class_declarations: 
  <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">=&gt;</span></span>
  <span>list(<span class="xref-unresolved">Parsetree</span>.class_declaration) <span class="arrow">=&gt;</span></span>
  <span>(list(<a href="#type-class_info">class_info</a>(<a href="../Typedtree/index.html#type-class_declaration">Typedtree.class_declaration</a>)), <a href="../Env/index.html#type-t">Env.t</a>)</span>;</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-class_descriptions"><a href="#val-class_descriptions" class="anchor"></a><code><span><span class="keyword">let</span> class_descriptions: 
  <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">=&gt;</span></span>
  <span>list(<span class="xref-unresolved">Parsetree</span>.class_description) <span class="arrow">=&gt;</span></span>
  <span>(list(<a href="#type-class_info">class_info</a>(<a href="../Typedtree/index.html#type-class_description">Typedtree.class_description</a>)), <a href="../Env/index.html#type-t">Env.t</a>)</span>;</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-class_type_declarations"><a href="#val-class_type_declarations" class="anchor"></a><code><span><span class="keyword">let</span> class_type_declarations: 
  <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">=&gt;</span></span>
  <span>list(<span class="xref-unresolved">Parsetree</span>.class_description) <span class="arrow">=&gt;</span></span>
  <span>(list(<a href="#type-class_type_info">class_type_info</a>), <a href="../Env/index.html#type-t">Env.t</a>)</span>;</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-approx_class_declarations"><a href="#val-approx_class_declarations" class="anchor"></a><code><span><span class="keyword">let</span> approx_class_declarations: 
  <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">=&gt;</span></span>
  <span>list(<span class="xref-unresolved">Parsetree</span>.class_description) <span class="arrow">=&gt;</span></span>
  <span>(list(<a href="#type-class_type_info">class_type_info</a>), <a href="../Env/index.html#type-t">Env.t</a>)</span>;</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-kind"><a href="#type-kind" class="anchor"></a><code><span><span class="keyword">type</span> kind</span><span> = </span></code><ol><li id="type-kind.Object" class="def variant constructor anchored"><a href="#type-kind.Object" class="anchor"></a><code><span>| </span><span><span class="constructor">Object</span></span></code></li><li id="type-kind.Class" class="def variant constructor anchored"><a href="#type-kind.Class" class="anchor"></a><code><span>| </span><span><span class="constructor">Class</span></span></code></li><li id="type-kind.Class_type" class="def variant constructor anchored"><a href="#type-kind.Class_type" class="anchor"></a><code><span>| </span><span><span class="constructor">Class_type</span></span></code></li></ol><code><span>;</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-error"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> error</span><span> = </span></code><ol><li id="type-error.Unconsistent_constraint" class="def variant constructor anchored"><a href="#type-error.Unconsistent_constraint" class="anchor"></a><code><span>| </span><span><span class="constructor">Unconsistent_constraint</span>(<a href="../Errortrace/index.html#type-unification_error">Errortrace.unification_error</a>)</span></code></li><li id="type-error.Field_type_mismatch" class="def variant constructor anchored"><a href="#type-error.Field_type_mismatch" class="anchor"></a><code><span>| </span><span><span class="constructor">Field_type_mismatch</span>(string, string, <a href="../Errortrace/index.html#type-unification_error">Errortrace.unification_error</a>)</span></code></li><li id="type-error.Unexpected_field" class="def variant constructor anchored"><a href="#type-error.Unexpected_field" class="anchor"></a><code><span>| </span><span><span class="constructor">Unexpected_field</span>(<a href="../Types/index.html#type-type_expr">Types.type_expr</a>, string)</span></code></li><li id="type-error.Structure_expected" class="def variant constructor anchored"><a href="#type-error.Structure_expected" class="anchor"></a><code><span>| </span><span><span class="constructor">Structure_expected</span>(<a href="../Types/index.html#type-class_type">Types.class_type</a>)</span></code></li><li id="type-error.Cannot_apply" class="def variant constructor anchored"><a href="#type-error.Cannot_apply" class="anchor"></a><code><span>| </span><span><span class="constructor">Cannot_apply</span>(<a href="../Types/index.html#type-class_type">Types.class_type</a>)</span></code></li><li id="type-error.Apply_wrong_label" class="def variant constructor anchored"><a href="#type-error.Apply_wrong_label" class="anchor"></a><code><span>| </span><span><span class="constructor">Apply_wrong_label</span>(<span class="xref-unresolved">Asttypes</span>.arg_label)</span></code></li><li id="type-error.Pattern_type_clash" class="def variant constructor anchored"><a href="#type-error.Pattern_type_clash" class="anchor"></a><code><span>| </span><span><span class="constructor">Pattern_type_clash</span>(<a href="../Types/index.html#type-type_expr">Types.type_expr</a>)</span></code></li><li id="type-error.Repeated_parameter" class="def variant constructor anchored"><a href="#type-error.Repeated_parameter" class="anchor"></a><code><span>| </span><span><span class="constructor">Repeated_parameter</span></span></code></li><li id="type-error.Unbound_class_2" class="def variant constructor anchored"><a href="#type-error.Unbound_class_2" class="anchor"></a><code><span>| </span><span><span class="constructor">Unbound_class_2</span>(<span class="xref-unresolved">Longident</span>.t)</span></code></li><li id="type-error.Unbound_class_type_2" class="def variant constructor anchored"><a href="#type-error.Unbound_class_type_2" class="anchor"></a><code><span>| </span><span><span class="constructor">Unbound_class_type_2</span>(<span class="xref-unresolved">Longident</span>.t)</span></code></li><li id="type-error.Abbrev_type_clash" class="def variant constructor anchored"><a href="#type-error.Abbrev_type_clash" class="anchor"></a><code><span>| </span><span><span class="constructor">Abbrev_type_clash</span>(<a href="../Types/index.html#type-type_expr">Types.type_expr</a>, <a href="../Types/index.html#type-type_expr">Types.type_expr</a>, <a href="../Types/index.html#type-type_expr">Types.type_expr</a>)</span></code></li><li id="type-error.Constructor_type_mismatch" class="def variant constructor anchored"><a href="#type-error.Constructor_type_mismatch" class="anchor"></a><code><span>| </span><span><span class="constructor">Constructor_type_mismatch</span>(string, <a href="../Errortrace/index.html#type-unification_error">Errortrace.unification_error</a>)</span></code></li><li id="type-error.Virtual_class" class="def variant constructor anchored"><a href="#type-error.Virtual_class" class="anchor"></a><code><span>| </span><span><span class="constructor">Virtual_class</span>(<a href="#type-kind">kind</a>, list(string), list(string))</span></code></li><li id="type-error.Undeclared_methods" class="def variant constructor anchored"><a href="#type-error.Undeclared_methods" class="anchor"></a><code><span>| </span><span><span class="constructor">Undeclared_methods</span>(<a href="#type-kind">kind</a>, list(string))</span></code></li><li id="type-error.Parameter_arity_mismatch" class="def variant constructor anchored"><a href="#type-error.Parameter_arity_mismatch" class="anchor"></a><code><span>| </span><span><span class="constructor">Parameter_arity_mismatch</span>(<span class="xref-unresolved">Longident</span>.t, int, int)</span></code></li><li id="type-error.Parameter_mismatch" class="def variant constructor anchored"><a href="#type-error.Parameter_mismatch" class="anchor"></a><code><span>| </span><span><span class="constructor">Parameter_mismatch</span>(<a href="../Errortrace/index.html#type-unification_error">Errortrace.unification_error</a>)</span></code></li><li id="type-error.Bad_parameters" class="def variant constructor anchored"><a href="#type-error.Bad_parameters" class="anchor"></a><code><span>| </span><span><span class="constructor">Bad_parameters</span>(<span class="xref-unresolved">Ident</span>.t, list(<a href="../Types/index.html#type-type_expr">Types.type_expr</a>), list(<a href="../Types/index.html#type-type_expr">Types.type_expr</a>))</span></code></li><li id="type-error.Bad_class_type_parameters" class="def variant constructor anchored"><a href="#type-error.Bad_class_type_parameters" class="anchor"></a><code><span>| </span><span><span class="constructor">Bad_class_type_parameters</span>(<span class="xref-unresolved">Ident</span>.t, list(<a href="../Types/index.html#type-type_expr">Types.type_expr</a>), list(<a href="../Types/index.html#type-type_expr">Types.type_expr</a>))</span></code></li><li id="type-error.Class_match_failure" class="def variant constructor anchored"><a href="#type-error.Class_match_failure" class="anchor"></a><code><span>| </span><span><span class="constructor">Class_match_failure</span>(list(<a href="../Ctype/index.html#type-class_match_failure">Ctype.class_match_failure</a>))</span></code></li><li id="type-error.Unbound_val" class="def variant constructor anchored"><a href="#type-error.Unbound_val" class="anchor"></a><code><span>| </span><span><span class="constructor">Unbound_val</span>(string)</span></code></li><li id="type-error.Unbound_type_var" class="def variant constructor anchored"><a href="#type-error.Unbound_type_var" class="anchor"></a><code><span>| </span><span><span class="constructor">Unbound_type_var</span>(<span class="xref-unresolved">Format_doc</span>.t, <a href="../Ctype/index.html#type-closed_class_failure">Ctype.closed_class_failure</a>)</span></code></li><li id="type-error.Non_generalizable_class" class="def variant constructor anchored"><a href="#type-error.Non_generalizable_class" class="anchor"></a><code><span>| </span><span><span class="constructor">Non_generalizable_class</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-error.id" class="def record field anchored"><a href="#type-error.id" class="anchor"></a><code><span>id: <span class="xref-unresolved">Ident</span>.t,</span></code></li><li id="type-error.clty" class="def record field anchored"><a href="#type-error.clty" class="anchor"></a><code><span>clty: <a href="../Types/index.html#type-class_declaration">Types.class_declaration</a>,</span></code></li><li id="type-error.nongen_vars" class="def record field anchored"><a href="#type-error.nongen_vars" class="anchor"></a><code><span>nongen_vars: list(<a href="../Types/index.html#type-type_expr">Types.type_expr</a>),</span></code></li></ol><code><span>}</span></code></li><li id="type-error.Cannot_coerce_self" class="def variant constructor anchored"><a href="#type-error.Cannot_coerce_self" class="anchor"></a><code><span>| </span><span><span class="constructor">Cannot_coerce_self</span>(<a href="../Types/index.html#type-type_expr">Types.type_expr</a>)</span></code></li><li id="type-error.Non_collapsable_conjunction" class="def variant constructor anchored"><a href="#type-error.Non_collapsable_conjunction" class="anchor"></a><code><span>| </span><span><span class="constructor">Non_collapsable_conjunction</span>(<span class="xref-unresolved">Ident</span>.t, <a href="../Types/index.html#type-class_declaration">Types.class_declaration</a>, <a href="../Errortrace/index.html#type-unification_error">Errortrace.unification_error</a>)</span></code></li><li id="type-error.Self_clash" class="def variant constructor anchored"><a href="#type-error.Self_clash" class="anchor"></a><code><span>| </span><span><span class="constructor">Self_clash</span>(<a href="../Errortrace/index.html#type-unification_error">Errortrace.unification_error</a>)</span></code></li><li id="type-error.Mutability_mismatch" class="def variant constructor anchored"><a href="#type-error.Mutability_mismatch" class="anchor"></a><code><span>| </span><span><span class="constructor">Mutability_mismatch</span>(string, <span class="xref-unresolved">Asttypes</span>.mutable_flag)</span></code></li><li id="type-error.No_overriding" class="def variant constructor anchored"><a href="#type-error.No_overriding" class="anchor"></a><code><span>| </span><span><span class="constructor">No_overriding</span>(string, string)</span></code></li><li id="type-error.Duplicate" class="def variant constructor anchored"><a href="#type-error.Duplicate" class="anchor"></a><code><span>| </span><span><span class="constructor">Duplicate</span>(string, string)</span></code></li><li id="type-error.Closing_self_type" class="def variant constructor anchored"><a href="#type-error.Closing_self_type" class="anchor"></a><code><span>| </span><span><span class="constructor">Closing_self_type</span>(<a href="../Types/index.html#type-class_signature">Types.class_signature</a>)</span></code></li></ol><code><span>;</span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Error"><a href="#exception-Error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Error</span>(<a href="../Location/index.html#type-t">Location.t</a>, <a href="../Env/index.html#type-t">Env.t</a>, <a href="#type-error">error</a>)</span><span>;</span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Error_forward"><a href="#exception-Error_forward" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Error_forward</span>(<a href="../Location/index.html#type-error">Location.error</a>)</span><span>;</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-report_error"><a href="#val-report_error" class="anchor"></a><code><span><span class="keyword">let</span> report_error: <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">=&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">=&gt;</span></span> <span><a href="#type-error">error</a> <span class="arrow">=&gt;</span></span> unit;</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-report_error_doc"><a href="#val-report_error_doc" class="anchor"></a><code><span><span class="keyword">let</span> report_error_doc: <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">=&gt;</span></span> <span class="xref-unresolved">Format_doc</span>.printer(<a href="#type-error">error</a>);</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-type_open_descr"><a href="#val-type_open_descr" class="anchor"></a><code><span><span class="keyword">let</span> type_open_descr: 
  <span class="xref-unresolved">Stdlib</span>.ref(<span>(<span><span class="optlabel">?used_slot</span>:<span class="xref-unresolved">Stdlib</span>.ref(bool) <span class="arrow">=&gt;</span></span>
    <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">=&gt;</span></span>
    <span><span class="xref-unresolved">Parsetree</span>.open_description <span class="arrow">=&gt;</span></span>
    <span>(<a href="../Typedtree/index.html#type-open_description">Typedtree.open_description</a>, <a href="../Env/index.html#type-t">Env.t</a>)</span>)</span>);</span></code></div></div></div></body></html>
