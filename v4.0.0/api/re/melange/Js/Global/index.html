<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Global (melange.Js.Global)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">melange</a> &#x00BB; <a href="../index.html">Js</a> &#x00BB; Global</nav><header class="odoc-preamble"><h1>Module <code><span>Js.Global</span></code></h1><p>Bindings to functions in the JS global namespace</p><p>Contains functions available in the global scope (<code>window</code> in a browser context)</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-intervalId"><a href="#type-intervalId" class="anchor"></a><code><span><span class="keyword">type</span> intervalId</span><span>;</span></code></div><div class="spec-doc"><p>Identify an interval started by <a href="#val-setInterval"><code>setInterval</code></a></p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-timeoutId"><a href="#type-timeoutId" class="anchor"></a><code><span><span class="keyword">type</span> timeoutId</span><span>;</span></code></div><div class="spec-doc"><p>Identify timeout started by <a href="#val-setTimeout"><code>setTimeout</code></a></p></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-clearInterval"><a href="#val-clearInterval" class="anchor"></a><code><span><span class="keyword">let</span> clearInterval: <span><a href="#type-intervalId">intervalId</a> <span class="arrow">=&gt;</span></span> unit;</span></code></div><div class="spec-doc"><p>Clear an interval started by <a href="#val-setInterval"><code>setInterval</code></a></p><pre class="language-ocaml"><code>(* API for a somewhat aggressive snoozing alarm clock *)

let interval = ref Js.Nullable.null

let remind () =
  Js.log &quot;Wake Up!&quot;;
  IO.punchSleepyGuy ()

let snooze mins =
  interval := Js.Nullable.return (Js.Global.setInterval remind (mins * 60 * 1000))

let cancel () =
  Js.Nullable.iter !interval (fun[\@u] intervalId -&gt; Js.Global.clearInterval intervalId)</code></pre><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval" class="value">https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval</a> <p>MDN</p></li></ul></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-clearTimeout"><a href="#val-clearTimeout" class="anchor"></a><code><span><span class="keyword">let</span> clearTimeout: <span><a href="#type-timeoutId">timeoutId</a> <span class="arrow">=&gt;</span></span> unit;</span></code></div><div class="spec-doc"><p>Clear a timeout started by <a href="#val-setTimeout"><code>setTimeout</code></a></p><pre class="language-ocaml"><code>(* A simple model of a code monkey's brain *)

let timer = ref Js.Nullable.null

let work () =
  IO.closeHackerNewsTab ()

let procrastinate mins =
  Js.Nullable.iter !timer (fun[\@u] timer -&gt; Js.Global.clearTimeout timer);
  timer := Js.Nullable.return (Js.Global.setTimeout work (mins * 60 * 1000))</code></pre><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearTimeout" class="value">https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearTimeout</a> <p>MDN</p></li></ul></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-setInterval"><a href="#val-setInterval" class="anchor"></a><code><span><span class="keyword">let</span> setInterval: <span><span class="label">f</span>:<span>(<span>unit <span class="arrow">=&gt;</span></span> unit)</span> <span class="arrow">=&gt;</span></span> <span>int <span class="arrow">=&gt;</span></span> <a href="#type-intervalId">intervalId</a>;</span></code></div><div class="spec-doc"><p><i>Repeatedly</i> executes a callback with a specified interval (in milliseconds) between calls</p><p><b>Return</b> an <a href="#type-intervalId"><code>intervalId</code></a> that can be passed to <a href="#val-clearInterval"><code>clearInterval</code></a> to cancel the timeout</p><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval" class="value">https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval</a> <p>MDN</p><pre class="language-ocaml"><code>(* Will count up and print the count to the console every second *)

let count = ref 0

let tick () =
  count := !count + 1; Js.log (string_of_int !count)

let _ =
  Js.Global.setInterval tick 1000</code></pre></li></ul></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-setIntervalFloat"><a href="#val-setIntervalFloat" class="anchor"></a><code><span><span class="keyword">let</span> setIntervalFloat: <span><span class="label">f</span>:<span>(<span>unit <span class="arrow">=&gt;</span></span> unit)</span> <span class="arrow">=&gt;</span></span> <span>float <span class="arrow">=&gt;</span></span> <a href="#type-intervalId">intervalId</a>;</span></code></div><div class="spec-doc"><p><i>Repeatedly</i> executes a callback with a specified interval (in milliseconds) between calls</p><p><b>Return</b> an <a href="#type-intervalId"><code>intervalId</code></a> that can be passed to <a href="#val-clearInterval"><code>clearInterval</code></a> to cancel the timeout</p><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval" class="value">https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval</a> <p>MDN</p><pre class="language-ocaml"><code>(* Will count up and print the count to the console every second *)

let count = ref 0

let tick () =
  count := !count + 1; Js.log (string_of_int !count)

let _ =
  Js.Global.setIntervalFloat tick 1000.0</code></pre></li></ul></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-setTimeout"><a href="#val-setTimeout" class="anchor"></a><code><span><span class="keyword">let</span> setTimeout: <span><span class="label">f</span>:<span>(<span>unit <span class="arrow">=&gt;</span></span> unit)</span> <span class="arrow">=&gt;</span></span> <span>int <span class="arrow">=&gt;</span></span> <a href="#type-timeoutId">timeoutId</a>;</span></code></div><div class="spec-doc"><p>Execute a callback after a specified delay (in milliseconds)</p><p><b>returns</b> a <a href="#type-timeoutId"><code>timeoutId</code></a> that can be passed to <a href="#val-clearTimeout"><code>clearTimeout</code></a> to cancel the timeout</p><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout" class="value">https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout</a> <p>MDN</p><pre class="language-ocaml"><code>(* Prints &quot;Timed out!&quot; in the console after one second *)

let message = &quot;Timed out!&quot;

let _ =
  Js.Global.setTimeout (fun () -&gt; Js.log message) 1000</code></pre></li></ul></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-setTimeoutFloat"><a href="#val-setTimeoutFloat" class="anchor"></a><code><span><span class="keyword">let</span> setTimeoutFloat: <span><span class="label">f</span>:<span>(<span>unit <span class="arrow">=&gt;</span></span> unit)</span> <span class="arrow">=&gt;</span></span> <span>float <span class="arrow">=&gt;</span></span> <a href="#type-timeoutId">timeoutId</a>;</span></code></div><div class="spec-doc"><p>Execute a callback after a specified delay (in milliseconds)</p><p><b>returns</b> a <a href="#type-timeoutId"><code>timeoutId</code></a> that can be passed to <a href="#val-clearTimeout"><code>clearTimeout</code></a> to cancel the timeout</p><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout" class="value">https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout</a> <p>MDN</p><pre class="language-ocaml"><code>(* Prints &quot;Timed out!&quot; in the console after one second *)

let message = &quot;Timed out!&quot;

let _ =
  Js.Global.setTimeoutFloat (fun () -&gt; Js.log message) 1000.0</code></pre></li></ul></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-encodeURI"><a href="#val-encodeURI" class="anchor"></a><code><span><span class="keyword">let</span> encodeURI: <span>string <span class="arrow">=&gt;</span></span> string;</span></code></div><div class="spec-doc"><p>URL-encodes a string.</p><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI" class="value">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI</a> <p>MDN</p></li></ul></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-decodeURI"><a href="#val-decodeURI" class="anchor"></a><code><span><span class="keyword">let</span> decodeURI: <span>string <span class="arrow">=&gt;</span></span> string;</span></code></div><div class="spec-doc"><p>Decodes a URL-enmcoded string produced by <code>encodeURI</code></p><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURI" class="value">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURI</a> <p>MDN</p></li></ul></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-encodeURIComponent"><a href="#val-encodeURIComponent" class="anchor"></a><code><span><span class="keyword">let</span> encodeURIComponent: <span>string <span class="arrow">=&gt;</span></span> string;</span></code></div><div class="spec-doc"><p>URL-encodes a string, including characters with special meaning in a URI.</p><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent" class="value">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent</a> <p>MDN</p></li></ul></div></div><div class="odoc-spec"><div class="spec value external anchored" id="val-decodeURIComponent"><a href="#val-decodeURIComponent" class="anchor"></a><code><span><span class="keyword">let</span> decodeURIComponent: <span>string <span class="arrow">=&gt;</span></span> string;</span></code></div><div class="spec-doc"><p>Decodes a URL-enmcoded string produced by <code>encodeURIComponent</code></p><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent" class="value">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent</a> <p>MDN</p></li></ul></div></div></div></body></html>
